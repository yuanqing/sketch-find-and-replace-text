!function(e,t){for(var n in t)e[n]=t[n]}(this,function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t,n){"use strict";var i={};n.r(i),n.d(i,"CHECK_BOX",function(){return c}),n.d(i,"DROP_DOWN",function(){return s}),n.d(i,"RADIO_BUTTONS",function(){return a}),n.d(i,"NUMERIC_TEXT_BOX",function(){return l.a}),n.d(i,"STRING_TEXT_BOX",function(){return d}),n.d(i,"TEXT_BOX",function(){});const r="sketch-plugin-helper";function o(){return JSON.parse('{"private": true,"version": "0.0.1","devDependencies": {"sketch-plugin-helper": "*"},"scripts": {"build": "sph build","fix": "sph lint --fix","lint": "sph lint","run": "sph run","symlink": "sph symlink","test": "sph test","unlink": "sph symlink --delete","version": "sph version","watch": "sph build --watch"},"sketch-plugin-helper": {"pluginName": "Find and Replace Text","pluginDescription": "A Sketch plugin to find and replace text in text layers and symbol instances","authorName": "Lim Yuan Qing","githubUserName": "yuanqing","githubRepositoryName": "sketch-find-and-replace-text","menu": [{"handler": "find-and-replace-text","label": "Find and Replace Text"},"-",{"handler": "reset-settings","label": "Reset Settings"}],"defaultSettings": {"caseSensitive": true,"findText": "","replaceText": "","scope": "Current page"}}\n}\n')}var u=n(1);function c({width:e,height:t,label:n,value:i}){const r=NSButton.alloc().initWithFrame(NSMakeRect(0,0,e,t));return r.setButtonType(NSSwitchButton),r.setBezelStyle(0),r.setState(i?NSOnState:NSOffState),r.setTitle(n),{view:r,retrieveValue:function(){return"1"==r.stringValue()}}}function s({width:e,height:t,value:n,possibleValues:i}){const r=NSPopUpButton.alloc().initWithFrame(NSMakeRect(0,0,e,t));i.forEach(function(e){r.addItemWithTitle(e)});const o=void 0!==n?i.indexOf(n):0;return r.selectItemAtIndex(o),{view:r,retrieveValue:function(){const e=r.indexOfSelectedItem();return i[e]}}}function a({width:e,height:t,value:n,possibleValues:i}){const r=NSButtonCell.alloc().init();r.setButtonType(NSRadioButton);const o=i.length,u=NSMatrix.alloc().initWithFrame_mode_prototype_numberOfRows_numberOfColumns(NSMakeRect(0,0,e,t),NSRadioModeMatrix,r,1,o);u.setCellSize(CGSizeMake(Math.floor(e/o),t)),u.cells().forEach(function(e,t){e.setTitle(i[t])});const c=void 0!==n?i.indexOf(n):0;return u.selectCellAtRow_column(0,c),{view:u,retrieveValue:function(){const e=u.cells().indexOfObject(u.selectedCell());return i[e]}}}var l=n(3),f=n(2);const d=Object(f.a)(),p=20,h=12,b=20,g=6,y=300;function v({title:e,inputs:t}){const n=function(){const{defaultSettings:e}=o()[r];return void 0===e?{}:Object.keys(e).reduce(function(t,n){const i=Object(u.sessionVariable)(n),r=Object(u.settingForKey)(n),o=void 0!==i?i:r,c=e[n];return t[n]=void 0!==o?o:c,t},{})}(),{inputs:c,views:s,stackViewHeight:a}=function({inputsConfig:e,settings:t}){const n={},r=[];let o=0;return e.forEach(function({type:e,key:u,label:c,value:s,...a}){if(c&&"CHECK_BOX"!==e){const e=function({label:e,width:t,height:n}){const i=NSTextField.alloc().initWithFrame(NSMakeRect(0,0,t,n));return i.setBezeled(!1),i.setDrawsBackground(!1),i.setEditable(!1),i.setLineBreakMode(NSLineBreakByTruncatingTail),i.setSelectable(!1),i.setStringValue(e),i}({label:c,width:y,height:b});r.push({view:e,paddingBottom:g}),o+=b+g}const l=t[u],f=null!=s?s:l,{view:d,retrieveValue:v}=i[e]({label:c,value:f,width:y,height:p,...a});r.push({view:d,paddingBottom:h}),o+=p+h,n[u]=v}),{inputs:n,views:r,stackViewHeight:o-=h}}({inputsConfig:t,settings:n}),l=function({width:e,height:t,views:n}){const i=NSStackView.alloc().initWithFrame(NSMakeRect(0,0,e,t));return i.setAlignment(NSLayoutAttributeLeft),i.setOrientation(NSUserInterfaceLayoutOrientationVertical),i.setSpacing(0),i.setTranslatesAutoresizingMaskIntoConstraints(!0),i.updateConstraintsForSubtreeIfNeeded(),n.forEach(function({view:e,paddingBottom:t}){i.addView_inGravity_(e,NSStackViewGravityTop),i.setCustomSpacing_afterView_(t,e)}),i}({width:y,height:a,views:s}),f=function(e){const t=NSAlert.alloc().init();return t.window().setAutorecalculatesKeyViewLoop(!0),t.setMessageText(e),t.addButtonWithTitle("OK"),t.addButtonWithTitle("Cancel"),t}(e);return f.setAccessoryView(l),"1000"==f.runModal()?Object.keys(c).reduce(function(e,t){const n=c[t];return e[t]=n(),e},{}):null}var _=n(4),S=n.n(_);function x(e,t){S.a.message(t&&t.symbol?`${t.symbol} ${e}`:e)}function m(e){x(e,{symbol:"✔"})}function O(e){x(e,{symbol:"✘"})}function w(){const{defaultSettings:e}=o()[r];void 0!==e&&(Object.keys(e).forEach(function(e){Object(u.setSettingForKey)(e,void 0),Object(u.setSessionVariable)(e,void 0)}),x("Reset settings"))}k(u.setSettingForKey);const T=k(u.setSessionVariable);function k(e){return function(t,n){if(void 0===t)return;Object.keys(t).forEach(function(n){const i=t[n];void 0!==i&&e(n,i)});const i=void 0!==n&&n.successMessage;i&&x(i)}}n(5),n(6);n(7);var N=n(8);function j(){const e=NSApplication.sharedApplication().orderedDocuments();return Object(N.fromNative)(e[0])}function E(){return j().selectedPage.layers}function B(){const e=[];return j().pages.forEach(function({layers:t}){t.forEach(function(t){e.push(t)})}),e}function C(){return j().selectedLayers.layers.reverse()}function M(e,t){e.forEach(function(e){t(e);const n=e.type;"Artboard"!==n&&"Group"!==n||M(e.layers,t)})}n.d(t,"h",function(){return v}),n.d(t,"i",function(){return w}),n.d(t,"j",function(){return T}),n.d(t,"a",function(){return"CHECK_BOX"}),n.d(t,"b",function(){return"DROP_DOWN"}),n.d(t,"c",function(){return"STRING_TEXT_BOX"}),n.d(t,"e",function(){return E}),n.d(t,"d",function(){return B}),n.d(t,"f",function(){return C}),n.d(t,"g",function(){return M}),n.d(t,"l",function(){return x}),n.d(t,"m",function(){return m}),n.d(t,"k",function(){return O})},function(e,t){e.exports=require("sketch/settings")},function(e,t,n){"use strict";function i(e){return function({width:t,height:n,value:i,placeholder:r}){const o=NSTextField.alloc().initWithFrame(NSMakeRect(0,0,t,n)),u=null==i?"":`${i}`;return o.setStringValue(u),r&&o.setPlaceholderString(r),{view:o,retrieveValue:function(){const t=`${o.stringValue()}`;return e?e(t):t}}}}n.d(t,"a",function(){return i})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return numericTextBox});var _text_box__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);const numericTextBox=Object(_text_box__WEBPACK_IMPORTED_MODULE_0__.a)(function(value){return parseFloat(eval(value))})},function(e,t){e.exports=require("sketch/ui")},function(e,t){e.exports=function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}},function(e,t,n){"use strict";const i=async(e,t)=>{let n=0;for(const i of e)await t(await i,n++);return e};e.exports=i,e.exports.default=i},function(e,t){e.exports=require("sketch/dom")},function(e,t){e.exports=require("sketch")},function(e,t,n){e.exports=n(10)},function(e,t,n){e.exports={"find-and-replace-text":n(12).default,"reset-settings":n(11).default}},function(e,t,n){"use strict";n.r(t);var i=n(0);t.default=i.i},function(e,t,n){"use strict";n.r(t);var i=n(0),r={SymbolInstance:function({layer:e,regularExpression:t,replaceText:n}){let i=0;return e.overrides.forEach(function(e){if(e.symbolOverride)return;const r=e.value;t.test(r)&&(e.value=r.replace(t,function(){return i++,n}))}),i},Text:function({layer:e,regularExpression:t,replaceText:n}){const i=e.text;if(t.test(i)){let r=0;return e.text=i.replace(t,function(){return r++,n}),r}return 0}};n.d(t,"default",function(){return u});const o={"Selected layers":"in the selected layers","Current page":"on the current page","Entire document":"across the entire document"};function u(){const e=Object(i.f)(),t=0!==e.length,n=Object(i.h)({title:"Find and Replace Text",inputs:[{type:i.c,key:"findText",label:"Find"},{type:i.a,key:"caseSensitive",label:"Case sensitive"},{type:i.c,key:"replaceText",label:"Replace"},{type:i.b,key:"scope",label:"Scope",possibleValues:[t&&"Selected layers","Current page","Entire document"].filter(Boolean),value:t?"Selected layers":null}]});if(!n)return;const{scope:u,...s}=n;Object(i.j)(t?s:n);let a=[];if(t){if(0===(a=c(e)).length)return void Object(i.k)("No text layers or symbol instances in selection")}else if(0===(a=c("Current page"===n.scope?Object(i.e)():Object(i.d)())).length)return void Object(i.k)("No text layers or symbol instances found");const l=new RegExp(n.findText,n.caseSensitive?"g":"gi");let f=0;a.forEach(function(e){const t=r[e.type]({layer:e,regularExpression:l,replaceText:n.replaceText});f+=t}),0!==f?Object(i.m)(`Made ${f} replacement${1===f?"":"s"} ${o[u]}`):Object(i.l)("No replacements made")}function c(e){const t=[];return Object(i.g)(e,function(e){"Text"!==e.type&&"SymbolInstance"!==e.type||t.push(e)}),t}}]));